<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>similar. hcapi3 3.7</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">hcapi3 3.7</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Rank spatial units by similarity</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>similar(x, var, by&nbsp;=&nbsp;0, iso3&nbsp;=&nbsp;"SSA")</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>x</dt>
      <dd>single integer code for the reference geography, either a region code
(ADM1_CODE_ALT), district code (ADM2_CODE_ALT), or gridcell code (CELL5M) to rank against</dd>
      <dt>var</dt>
      <dd>character array of HarvestChoice variable codes used in the ranking</dd>
      <dt>by</dt>
      <dd>single integer indicating the type of reference geography (0-gridcell,
1-region, 2-district)</dd>
      <dt>iso3</dt>
      <dd>optional country or region filter (3-letter code)</dd>
    </dl>
    
    <div class="Value">
      <h2>Value</h2>

      <p><dl>
a data.table of regions, districts, or pixels ranked by similarity to
a reference geography <code>x</code>
</dl></p>
  
    </div>

    <div class="Description">
      <h2>Description</h2>

      <p>Rank regions, districts, or pixels by similarity to a reference unit across a set of
indicators. To generate a distance score, we center and scale all numeric variables
and convert classified variables to 0 or 1 (1 if same as reference unit, 0 otherwise).
For each variable we compute the absolute percent deviation between each unit and the
reference unit, and we then sum the deviations across all variables to generate an
aggregate distance score. The lower the score, the more similar the unit for the
selected indicators.</p>
  
    </div>

    <div class="Details">
      <h2>Details</h2>

      <p>API call: rank Ghana districts by similarity to district 16657  (Kpando) based on
length of growing period, irrigated area, and cassava value of production</p>
  
      <p><code>$ curl http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/similar/json \
 -d '{"x" : 16657, "var" : ["LGP_AVG", "GMIA_V5", "cass_v"], "by" : 2, "iso3" : "GHA"}' \
 -X POST -H "Content-Type:application/json"
</code></p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'># Rank all districts in Ghana by similarity to district 16657 (Kpando)
# based on length of growing period (LGP_AVG), irrigated cropland (GMIA_V5),
# and cassava value of production (cass_v).
similar(16657, c(&quot;LGP_AVG&quot;, &quot;GMIA_V5&quot;, &quot;cass_v&quot;), by=2, iso3=&quot;GHA&quot;)
</div>
<div class='output'>     ISO3 ADM0_NAME ADM2_CODE_ALT LGP_AVG GMIA_V5   cass_v     Score
  1:  GHA     Ghana         16657     278       0  3021856 0.0000000
  2:  GHA     Ghana         16575     287       0  3172796 0.2157802
  3:  GHA     Ghana         16595     265      28  3176379 0.3335517
  4:  GHA     Ghana         16651     273       0  5486071 0.3914655
  5:  GHA     Ghana         16652     271      97  5449375 0.5322633
 ---                                                                
106:  GHA     Ghana         16636     181    3008  3471751 5.3190665
107:  GHA     Ghana         16658     230       0 41057948 5.3987159
108:  GHA     Ghana         16644     169    3096        0 5.9687622
109:  GHA     Ghana         16618     283    4633 17700273 6.6024348
110:  GHA     Ghana         16628     178     153 45721318 7.2371012
</div>
<div class='input'></div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>similar</li>
    </ul>
    <ul>
      
    </ul> -->
      
        
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="http://twitter.github.com/bootstrap">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>