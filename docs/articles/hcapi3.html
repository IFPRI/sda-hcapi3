<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An Introduction to HarvestChoice Data Services v3 • hcapi3</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">hcapi3</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>An Introduction to HarvestChoice Data Services v3</h1>
                        <h4 class="author">Melanie Bacou</h4>
            
            <h4 class="date">2017-02-20</h4>
          </div>

    
    
<div class="contents">
<p>In 2014 HarvestChoice released a new version of its data API<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> under the title <a href="http://harvestchoice.org/tools/harvestchoice-data-services">HarvestChoice Data Services v3.0</a>. We currently maintain two APIs, HarvestChoice Data Services (v3.0 as of writing) and <a href="http://harvestchoice.org/tools/hcapi">HarvestChoice Data API</a>. The latter provides backend methods required to run two of our flagship reporting and visualization applications, <a href="http://apps.harvestchoice.org/mappr/">MAPPR</a> and <a href="http://apps.harvestchoice.org/tablr/">TABLR</a>. We envision merging these two APIs in the near future, but currently focus our efforts on building new and faster data access methods into <em>HC Data Services</em>.</p>
<p>Through transparent data services our aim is to facilitate the re-use and integration of HarvestChoice’s spatially-consistent biophysical and socio-economic indicators into 3rd-party tools and models. As of 2017-02-20 over 750 indicators are available for sub-Saharan Africa.</p>
<div id="warning" class="section level1">
<h1 class="hasAnchor">
<html><body><a href="#warning" class="anchor"> </a></body></html>Warning</h1>
<p>This R package cannot be installed locally. Instead we provide access to all methods through a RESTful API (credits to (<a href="http://github.com/jeroenooms/opencpu" class="uri">http://github.com/jeroenooms/opencpu</a>)[OpenCPU]). Method names are endpoints and function arguments must be converted from R syntax to simple JSON objects, <code>foo(arg1=c("val1", "val2"))</code> must be passed to endpoint <code>http://harvestchoice.org/tools/hcapi/R/foo</code> using <code>{"arg1" : ["val1", "val2"]}</code>.</p>
<p>The examples below show sample request mechanics using <em>cURL</em> at the command line, but the same approach will work in R using <code>jsonlite::curl()</code> and in STATA using procedure <code>??</code>.</p>
</div>
<div id="data-apis---what-for" class="section level1">
<h1 class="hasAnchor">
<html><body><a href="#data-apis---what-for" class="anchor"> </a></body></html>Data APIs - What for?</h1>
<p>Forthcomming</p>
</div>
<div id="using-harvestchoice-data-services" class="section level1">
<h1 class="hasAnchor">
<html><body><a href="#using-harvestchoice-data-services" class="anchor"> </a></body></html>Using HarvestChoice Data Services</h1>
<p>This API implements a RESTful<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> interface allowing users to query, summarize, plot, and download any subset of HarvestChoice’s 700 spatially-explicit indicators for sub-Saharan Africa. We describe here some of the methods available to developers and researchers to programmatically interact with the API.</p>
<p>Because the API uses standard REST protocol and HTTP verbs (GET, POST), requests may be sent through any URL transfer utility (e.g. <em>cURL</em> on both Windows and Linux), or using any programming language that implements HTTP requests (including statistical languages such as STATA, R, and SAS). The logic consists in calling a specific method and passing any number of required or optional arguments or parameters. In the examples below we use the command line tool <em>cURL</em> in Windows (available in Windows 7 and 8).</p>
<p>The API’s main endpoint is at <a href="http://hcapi.harvestchoice.org/ocpu/library/hcapi3" class="uri">http://hcapi.harvestchoice.org/ocpu/library/hcapi3</a>. There are a couple of useful methods exposing the API documentation. These are explained here.</p>
<div id="using-methods-and-parameters" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#using-methods-and-parameters" class="anchor"> </a></body></html>Using Methods and Parameters</h2>
<p>The API exposes a list of available methods at <a href="http://hcapi.harvestchoice.org/ocpu/library/hcapi3/info/" class="uri">http://hcapi.harvestchoice.org/ocpu/library/hcapi3/info/</a>. In turn each method is further documented at <code>/man/{method}/html</code> e.g. <a href="http://hcapi.harvestchoice.org/ocpu/library/hcapi3/man/getLayer/html" class="uri">http://hcapi.harvestchoice.org/ocpu/library/hcapi3/man/getLayer/html</a> ([#fig2]).</p>
<div id="example-1-list-of-available-api-methods" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#example-1-list-of-available-api-methods" class="anchor"> </a></body></html>Example #1: list of available API methods</h3>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># List of API methods</span>
<span class="kw">curl</span> http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R</code></pre></div>
<pre><code>##   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
##                                  Dload  Upload   Total   Spent    Left  Speed
## 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  0    66    0    66    0     0    415      0 --:--:-- --:--:-- --:--:--   846
## Redirect to http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/</code></pre>
<p>The main data query method is <code><a href="../reference/hcapi.html">hcapi()</a></code> with a REST endpoint at (<a href="http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/hcapi" class="uri">http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/hcapi</a>)[/R/hcapi]. <code><a href="../reference/category.html">category()</a></code> and <code>describe()</code> may be used to return indicator metadata. Other methods, like <code>classify()</code> (summarizing indicators across custom geographic domains) and <code><a href="../reference/similar.html">similar()</a></code> (ranking areas by similarity) are useful to conduct advanced analyses.</p>
</div>
<div id="example-2-method-documentation" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#example-2-method-documentation" class="anchor"> </a></body></html>Example #2: method documentation</h3>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Sample method documentation</span>
<span class="kw">curl</span> http://hcapi.harvestchoice.org/ocpu/library/hcapi3/man/hcapi/text</code></pre></div>
<pre><code>##   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
##                                  Dload  Upload   Total   Spent    Left  Speed
## 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0hcapi                  package:hcapi3                  R Documentation
## 
## Query, subset, summarize, and download HarvestChoice indicators
## 
## Description:
## 
##      Wrapper method to query, subset and/or aggregate HarvestChoice
##      layers. This method may also be used to summarize classified
##      variables along intervals of continuous variables, e.g.
##      hcapi(var="AEZ16_CLAS", by="bmi"). Here AEZ16_CLAS is a classified
##      (categorical) raster, and bmi is a continuous raster, but the
##      request is valid. The dominant class of AEZ16_CLAS is returned
##      along intervals of bmi. Default interval breaks are used but
##      custom intervals may also be defined, e.g. hcapi(var="AEZ16_CLAS",
##      by=list(bmi=c(0, 5, 10, 15, 20, 25))). The dominant class of a
##      variable var is defined by dominant(var). Layers may also be
##      summarized over spatial points are areas (passed as WKT
##      representations using argument wkt). Use the format argument to
##      control the output format (see examples below).
## 
## Usage:
## 
##      hcapi(var, iso3 = "SSA", by = NULL, wkt = NULL, format = NULL, ...)
##      
## Arguments:
## 
##      var: character array of variable codes, passed to getLayer
## 
##     iso3: character array of ISO3 country or region codes, passed to
##           getLayer
## 
##       by: character array of variable codes to summarize by, passed to
##           getLayer
## 
##      wkt: WKT representation of a spatial object (points, multipoints,
##           or polygons, multipolygons)
## 
##   format: output format, one of "data.table", "csv", "tif", "dta",
##           "asc", "grd", "rds", else "plot" to plot the rasters, or
##           "hist" to plot histogram and univariate statistics
## 
##      ...: other optional arguments passed to getLayer, genFile, or to
##           genPlot, e.g. collapse=TRUE, as.list=TRUE, dir, pal.
## 
## Details:
## 
##      Sample API call: mean body mass index and cassava yield across
##      provinces and districts of Tanzania
## 
##      $ curl http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/hcapi
##      -d '{"var" : "cass_y", "iso3" : "CIV", "format" : "tif"}' -X POST
##      -H 'Content-Type:application/json'
## 
##      /ocpu/tmp/x0bc1ac9bdf/R/.val /ocpu/tmp/x0bc1ac9bdf/stdout
##      /ocpu/tmp/x0bc1ac9bdf/warnings /ocpu/tmp/x0bc1ac9bdf/source
##      /ocpu/tmp/x0bc1ac9bdf/console /ocpu/tmp/x0bc1ac9bdf/info
##      /ocpu/tmp/x0bc1ac9bdf/files/bmi--TZA.tfw
##      /ocpu/tmp/x0bc1ac9bdf/files/bmi--TZA.tif
##      /ocpu/tmp/x0bc1ac9bdf/files/bmi--TZA.tif.aux.xml
##      /ocpu/tmp/x0bc1ac9bdf/files/DESCRIPTION
##      /ocpu/tmp/x0bc1ac9bdf/files/README
## 
##      GET all generated files in a ZIP archive
## 
##      $ wget http://hcapi.harvestchoice.org/ocpu/tmp/x0bc1ac9bdf/zip
## 
##      Sample API call: the method may be expanded to summarize
##      classified (discrete) variables along continuous variables. For
##      example the call below returns the dominant agro-ecological zone
##      and average stunting in children under 5 over Ethiopia's provinces
##      and generic elevation zones
## 
##      $ curl
##      http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/hcapi/json -d
##      '{ "var" : ["AEZ8_CLAS","stunted_moderate"], "iso3" : "ETH", "by"
##      : ["ADM1_NAME_ALT","ELEVATION"] }' -X POST -H
##      'Content-Type:application/json'
## 
## Value:
## 
##      a data.table (or other formats) of HarvestChoice indicators
##      optionally summarized over by domains
## 
## See Also:
## 
##      getLayer getLayerWKT genFile
## 
## Examples:
## 
##      # Mean body mass index and cassava yield across provinces and districts of Tanzania
##      x &lt;- hcapi(c("bmi", "cass_y"), iso3="TZA", by=c("ADM1_NAME_ALT", "ADM2_NAME_ALT"))
##      x
##      
##      # To identify HarvestChoice indicator codes, query the entire catalog using category()
##      category("poverty")
##      
##      # Plot results for Mara province
##      require(lattice)
##      barchart(ADM2_NAME_ALT~bmi, data=x[ADM1_NAME_ALT=="Mara"], col="grey90")
##      
##      # Return mean cassava yield in Ivory Coast in GeoTIFF format
##      r &lt;- hcapi("cass_y", iso3="CIV", format="tif")
##      
##      # Plot the generated GeoTIFF raster (one band only)
##      require(raster)
##      plot(raster(r[2]))
##      
##      # The method may be expanded to summarize c
101  4791    0  4791    0     0  47826      0 --:--:-- --:--:-- --:--:-- 92134
## lassified (discrete) variables along continuous
##      # variables. For example the call below returns dominant agro-ecological zone and
##      # average stunting in children under 5 over Ethiopia's provinces by elevation class
##      x &lt;- hcapi(c("AEZ8_CLAS", "stunted_moderate"), iso3="ETH", by=c("ADM1_NAME_ALT", "ELEVATION"))
##      x
##      
##      # Mean harvested maize area summarized across a custom polygon
##      x &lt;- hcapi(var="maiz_h", wkt="POLYGON((-16.35819663578485006 15.36599264077935345,
##      -15.42501860768386379 15.69472580976947462, -15.11749403024149174 14.83577785208561117,
##      -16.13550642453347805 14.68731771125136376, -16.35819663578485006 15.36599264077935345))")
##      x
## </code></pre>
<p>The documentation for each method provides a short description and a list of parameters and default parameter values, as well as an example. <code><a href="../reference/getLayer.html">getLayer()</a></code> is one of the API’s main methods allowing users to query and summarize indicators. The documentation above shows that <code><a href="../reference/getLayer.html">getLayer()</a></code> takes at minimum one parameter <code>var</code> indicating which indicator to query (e.g. <code>var='PD05_TOT'</code> to return 2005 population density). Other optional parameters include <code>iso3</code> limiting the results to one (or multiple) countri(es) (e.g. <code>iso3=['GHA', 'NGA']</code> for Ghana and Nigeria), and <code>by</code> summarizing the indicators over a geographic domain (e.g. 8-class agro-ecological zones <code>by='AEZ8_CLAS'</code>).</p>
<p>You can test this query by manually forming the following <em>cURL</em> request. This returns a JSON array.</p>
</div>
<div id="example-3-simple-request-returning-a-dataset-in-json" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#example-3-simple-request-returning-a-dataset-in-json" class="anchor"> </a></body></html>Example #3: simple request returning a dataset in JSON</h3>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">curl</span> http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/hcapi/json \
-d <span class="st">"var='PD05_TOT'&amp;iso3='GHA'&amp;by='AEZ8_CLAS'"</span> -X POST</code></pre></div>
<pre><code>##   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
##                                  Dload  Upload   Total   Spent    Left  Speed
## 
  0     0    0     0    0    40      0    816 --:--:-- --:--:-- --:--:--   816
205   165    0   165    0    40    307     74 --:--:-- --:--:-- --:--:--   256
205   165    0   165    0    40    307     74 --:--:-- --:--:-- --:--:--   256
## lazy-load database '/usr/lib64/R/library/stringr/R/stringr.rdb' is corrupt
## 
## In call:
## w$get_new(plot, incomplete_plots, output_handler$text, output_handler$graphics)</code></pre>
<p>For users of STATA or R the same dataset may be returned in a native format by using the same method appending a <code>format</code> parameter at the end of the request, and appending <code>/zip</code> to the URL endpoint. This will return all generated files in a single ZIP file.</p>
</div>
<div id="example-4-request-ghana-2005-population-density-pd05_tot-summarized-across-agro-ecological-zones-aez8_clas-in-stata-format-dta" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#example-4-request-ghana-2005-population-density-pd05_tot-summarized-across-agro-ecological-zones-aez8_clas-in-stata-format-dta" class="anchor"> </a></body></html>Example #4: request Ghana 2005 population density (PD05_TOT) summarized across agro-ecological zones (AEZ8_CLAS) in STATA format (dta)</h3>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">curl</span> http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/hcapi \
-d <span class="st">"var='PD05_TOT'&amp;iso3='GHA'&amp;by='AEZ8_CLAS'&amp;format='dta'"</span> -X POST</code></pre></div>
<pre><code>##   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
##                                  Dload  Upload   Total   Spent    Left  Speed
## 
  0     0    0     0    0    53      0    712 --:--:-- --:--:-- --:--:--   712
218   165    0   165    0    53    287     92 --:--:-- --:--:-- --:--:--   224
## lazy-load database '/usr/lib64/R/library/stringr/R/stringr.rdb' is corrupt
## 
## In call:
## w$get_new(plot, incomplete_plots, output_handler$text, output_handler$graphics)</code></pre>
</div>
<div id="example-5-same-request-returning-a-file-in-rdata-format" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#example-5-same-request-returning-a-file-in-rdata-format" class="anchor"> </a></body></html>Example #5: same request returning a file in RData format</h3>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">curl</span> http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/hcapi \
-d <span class="st">"var='PD05_TOT'&amp;iso3='GHA'&amp;by='AEZ8_CLAS'&amp;format='rda'"</span> -X POST</code></pre></div>
<pre><code>##   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
##                                  Dload  Upload   Total   Spent    Left  Speed
## 
  0     0    0     0    0    53      0   1107 --:--:-- --:--:-- --:--:--  1107
218   165    0   165    0    53    308     99 --:--:-- --:--:-- --:--:--   229
218   165    0   165    0    53    308     99 --:--:-- --:--:-- --:--:--   229
## lazy-load database '/usr/lib64/R/library/stringr/R/stringr.rdb' is corrupt
## 
## In call:
## w$get_new(plot, incomplete_plots, output_handler$text, output_handler$graphics)</code></pre>
<p>Other possible formats include <code>csv</code>, <code>json</code> for GeoJSON, and raster formats <code>grd</code>, <code>tif</code> and <code>asc</code> for R raster, GeoTiff, and ESRI ASCII raster respectively. Note that as-is these requests do not return any file, only a JSON response with (if the response is succesful) pointers to the generated files. To download all generated files, add <code>/zip</code> to the session endpoint.</p>
</div>
<div id="example-6-ghana-wheat-production-in-csv-format-aggregated-over-districts" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#example-6-ghana-wheat-production-in-csv-format-aggregated-over-districts" class="anchor"> </a></body></html>Example #6: Ghana wheat production in CSV format aggregated over districts</h3>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Generate ZIP file</span>
<span class="kw">curl</span> http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/hcapi \
-d <span class="st">"var='whea_p'&amp;iso3='GHA'&amp;by=['ADM2_CODE_ALT','ADM2_NAME_ALT']&amp;format='csv'"</span> -X POST</code></pre></div>
<pre><code>##   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
##                                  Dload  Upload   Total   Spent    Left  Speed
## 
  0     0    0     0    0    73      0   1247 --:--:-- --:--:-- --:--:--  1247
  0    55    0    55    0    73    389    516 --:--:-- --:--:-- --:--:--     0
## Unparsable argument: ['ADM2_CODE_ALT','ADM2_NAME_ALT']</code></pre>
<pre><code>--2015-02-03 04:10:38--
Resolving hcapi.harvestchoice.org (hcapi.harvestchoice.org)... 206.190.150.74
Connecting to hcapi.harvestchoice.org (hcapi.harvestchoice.org)|206.190.150.74|:80...
HTTP request sent, awaiting response... 200 OK
Length: unspecified [application/zip]
Saving to: 'PD05_TOT-AEZ8_CLAS-GHA.csv.zip'

PD05_TOT-AEZ8_CLAS-GH     [ &lt;=&gt;                      ]   2.38K  --.-KB/s   in 0s

2015-02-03 04:10:38 (24.0 MB/s) - 'PD05_TOT-AEZ8_CLAS-GHA.csv.zip' saved [2432]</code></pre>
</div>
</div>
</div>
<div id="about-the-data" class="section level1">
<h1 class="hasAnchor">
<html><body><a href="#about-the-data" class="anchor"> </a></body></html>About the Data</h1>
<p>All of the API methods require passing indicator codes as parameters. These codes uniquely identify an indicator and may be accessed using two of the metadata query methods <code><a href="../reference/category.html">category()</a></code> and <code>describe()</code>. <code><a href="../reference/category.html">category()</a></code> returns a list of indicators in any category matching a <code>cat</code> keyword. <code>describe()</code> returns complete metadata records for selected indicators. Sample requests are shown here. The returned <code>Code</code> element is the variable code to pass into other API methods.</p>
<div id="example-7-return-list-of-indicators-in-any-category-matching-demo" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#example-7-return-list-of-indicators-in-any-category-matching-demo" class="anchor"> </a></body></html>Example #7: return list of indicators in any category matching ‘demo’</h3>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">curl</span> http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/category/json \
-d <span class="st">"cat='climate'"</span> -X POST</code></pre></div>
<pre><code>##   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
##                                  Dload  Upload   Total   Spent    Left  Speed
## 
  0     0    0     0    0    13      0    275 --:--:-- --:--:-- --:--:--   275
  0    70    0    70    0    13    432     80 --:--:-- --:--:-- --:--:--   500
## unused argument (cat = "climate")
## 
## In call:
## category(cat = "climate")</code></pre>
</div>
<div id="example-8-retrieve-text-documentation-for-describe-method" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#example-8-retrieve-text-documentation-for-describe-method" class="anchor"> </a></body></html>Example #8: retrieve text documentation for /describe/ method</h3>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">curl</span> http://hcapi.harvestchoice.org/ocpu/library/hcapi3/man/describe/text</code></pre></div>
<pre><code>##   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
##                                  Dload  Upload   Total   Spent    Left  Speed
## 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  0    96    0    96    0     0   1059      0 --:--:-- --:--:-- --:--:--  3428
## No documentation for 'describe' in specified packages and libraries:
## you could try '??describe'</code></pre>
</div>
<div id="example-9-return-metadata-records-for-all-indicators-under-the-health-and-nutrition-category" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#example-9-return-metadata-records-for-all-indicators-under-the-health-and-nutrition-category" class="anchor"> </a></body></html>Example #9: return metadata records for all indicators under the ‘Health and Nutrition’ category</h3>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">curl</span> http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/describe/json \
-d <span class="st">"cat='bmi'"</span> -X POST</code></pre></div>
<pre><code>##   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
##                                  Dload  Upload   Total   Spent    Left  Speed
## 
  0     0    0     0    0     9      0    149 --:--:-- --:--:-- --:--:--   149
121   112    0   112    0     9    817     65 --:--:-- --:--:-- --:--:--  1337
## object 'describe' not found
## 
## In call:
## get(reqobject, paste("package", reqpackage, sep = ":"), inherits = FALSE)</code></pre>
<p>Indicator metadata is only available in JSON format. However it is possible to download all metadata records in CSV format using <a href="http://hcapi.harvestchoice.org/ocpu/library/hcapi3/data/vi/csv" class="uri">http://hcapi.harvestchoice.org/ocpu/library/hcapi3/data/vi/csv</a> (<code>vi</code> in the URL stands for <em>Variable Inventory</em>).</p>
</div>
</div>
<div id="advanced-methods" class="section level1">
<h1 class="hasAnchor">
<html><body><a href="#advanced-methods" class="anchor"> </a></body></html>Advanced Methods</h1>
</div>
<div id="source-code-repository" class="section level1">
<h1 class="hasAnchor">
<html><body><a href="#source-code-repository" class="anchor"> </a></body></html>Source Code Repository</h1>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Application Programming Interface, see <a href="http://en.wikipedia.org/wiki/Application_programming_interface" class="uri">http://en.wikipedia.org/wiki/Application_programming_interface</a><a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Representational State Transfer, see <a href="http://en.wikipedia.org/wiki/Representational_state_transfer" class="uri">http://en.wikipedia.org/wiki/Representational_state_transfer</a><a href="#fnref2">↩</a></p></li>
</ol>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#warning">Warning</a></li>
      <li><a href="#data-apis---what-for">Data APIs - What for?</a></li>
      <li>
<a href="#using-harvestchoice-data-services">Using HarvestChoice Data Services</a><ul class="nav nav-pills nav-stacked">
<li><a href="#using-methods-and-parameters">Using Methods and Parameters</a></li>
      </ul>
</li>
      <li><a href="#about-the-data">About the Data</a></li>
      <li><a href="#advanced-methods">Advanced Methods</a></li>
      <li><a href="#source-code-repository">Source Code Repository</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Melanie Bacou.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
