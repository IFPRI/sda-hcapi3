<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>classify. hcapi3 3.5</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">hcapi3 3.5</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Create custom domains for spatial targeting</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>classify(var, by, ...)</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>var</dt>
      <dd>character array of variable names (all types are accepted)</dd>
      <dt>by</dt>
      <dd>named list of numeric or character arrays representing custom value breaks for each variable to summarize by</dd>
      <dt>...</dt>
      <dd>other arguments passed to <code>getLayer()</code> (e.g. iso3, collapse)</dd>
    </dl>
    
    <div class="Value">
      <h2>Value</h2>

      <p><dl>
a data.table of <code>var</code> indicators aggregated by custom <code>by</code> domains
</dl></p>
  
    </div>

    <div class="Description">
      <h2>Description</h2>

      <p>All HarvestChoice spatial layers come with default value breaks to create map legends
and to automatically convert continuous variables into classified variables (this is needed
when summarizing). For example, the value breaks for cassava production may be returned
using <code>getMeta("cass_p")</code>. They are <code>c(0, 1074, 4260, 10051, 19920, 40085, 101843)</code>.
This method extends the classification logic to allow for any custom value break(s).
For example one can summarize a set of selected indicators over areas
of low population density, and/or areas covering a single farming system (or any
combination of custom domains).</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'># Return average wealth index and poverty rates for areas of medium rural
# population density and low market access (under 5hrs travel time)
classify(c(&quot;wealth&quot;,&quot;TPOV_PT200&quot;),
    by=list(PD05_RUR=c(60, 100), TT_20K=c(0, 5)))
</div>
<div class='output'>   PD05_RUR TT_20K wealth TPOV_PT200
1:       NA     NA      2         71
2:       NA  (0,5]      2         65
3: (60,100]  (0,5]      2         72
4: (60,100]     NA      2         74
</div>
<div class='input'>
# Equivalent cUrl request at the command line
# curl http://hcapi.harvestchoice.org/ocpu/library/hcapi3/R/classify/json \
# -d &#39;{&quot;var&quot; : [&quot;wealth&quot;, &quot;TPOV_PT200&quot;], &quot;by&quot; : {&quot;PD05_RUR&quot; : [60, 100], &quot;TT_20K&quot; : [0, 5]}}&#39; \
# -X POST -H &quot;Content-Type:application/json&quot;

# Return average rainfall across Ethiopia&#39;s districts for areas above/below 100m elevation
classify(&quot;pre_mean&quot;, by=list(&quot;ADM2_NAME_ALT&quot;, ELEV=c(0, 100, 3000)), iso3=&quot;ETH&quot;)
</div>
<strong class='error'>Error in parse(text = paste0(&quot;data &lt;- RS.eval(rc, &quot;, data, &quot;)&quot;)): &lt;text&gt;:1:99: unexpected &#39;=&#39;
1: data &lt;- RS.eval(rc, dt[ISO3 %in% c(&#39;ETH&#39;)][][, list(pre_mean=mean(pre_mean, na.rm=TRUE)), by=list(=
                                                                                                      ^</strong></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>classify</li>
    </ul>
    <ul>
      
    </ul> -->
      
        
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="http://twitter.github.com/bootstrap">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>